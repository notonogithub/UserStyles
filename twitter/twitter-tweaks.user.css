/* ==UserStyle==
@name           Twitter Tweaks
@version        1.0.8
@description    A collection of tweaks for: Uncropping images, hiding trends, Avatar roundness, moving header aside, and more!!
@updateURL      https://codeberg.org/Freeplay/UserStyles/raw/branch/main/twitter/twitter-tweaks.user.css
@preprocessor   stylus

 -- AUTHOR STUFF --
@namespace      Freeplay
@author         Freeplay (https://freeplay.codeberg.page/)
@homepageURL    https://codeberg.org/Freeplay/UserStyles
@supportURL     https://codeberg.org/Freeplay/UserStyles/issues

@var text notice 'Make sure you are using the "Stylus" browser extension, not "Stylish!"' "'https://add0n.com/stylus.html'"

@var checkbox moveHeader     "➡ Move header to sidebar" 1

@var checkbox uncrop         "🖼 Uncrop Images" 1
@var checkbox maxHeight      "🖼 Uncrop Images: Set max height to viewport size" 1

@var checkbox resizeSidebar  "↔ Resize image preview sidebar depending on image size" 1
@var checkbox removeImageBar "⛔ Hide image preview interaction bar" 1

@var checkbox noTrends       "⛔ Hide 'What's Happening' box" 1
@var checkbox noFollowBox    "⛔ Hide Sidebar 'Who to follow' box" 0

@var checkbox noMessagesBox  "⛔ Hide 'Messages' box" 1

@var checkbox hideTweetBoxTL "⛔ Hide Timeline Tweet box" 0

@var select   noBorder       "⛔ Border Style" ["Default*", "Hide", "keep:Only Timeline Separators"]
@var checkbox columnBG       "💡 Contrast between background and feed" 1
@var checkbox bgBanner       "🖼 Use banners as background" 1

@var range    avatarRadius   "⚫ Avatar Border Radius" [30, 5, 50, 5, '%']

@var checkbox moreAnim       "🎞️ More Animations" 1

@var text noticeMobile "Below are options meant for Mobile Devices" '"Okay!"'

@var checkbox centerTweet    "Center Tweet Button" 1
@var checkbox largerBottomBar "Larger Bottom Bar" 0
@var checkbox bottomHeader    "Move header to bottom" 1

==/UserStyle== */

/* Update 1.0.8
- Fixes plus polishing!
*/
@-moz-document domain("twitter.com") {
	
	if moveHeader {
		@media only screen and (min-width: 1001px) {
			[data-testid="primaryColumn"] > div > div:first-child {
				border: 0 !important;
			}
			main .css-1dbjc4n [class="css-1dbjc4n r-1h3ijdo r-136ojw6"] {
				width: 352px;
				margin-left: auto;
				margin-right: -382px;
				margin-bottom: -54px;
				background: none !important;
			}
			.css-1dbjc4n [class="css-1dbjc4n r-1h3ijdo r-136ojw6"] > div > [class*="r-1h3ijdo r-ymttw5"] {
				background: none !important;
			}
			
			// Sidebar padding
			[data-testid="sidebarColumn"] [class="css-1dbjc4n r-vacyoi r-ttdzmv"] {
				padding-top: 60px !important;
			}
			// Search Bar
			[data-testid="sidebarColumn"] > .css-1dbjc4n > .css-1dbjc4n [class*="r-15ysp7h r-1xcajam r-ipm5af"]::before {
				content: "";
				background-color: inherit;
				width: 100%;
				height: 100px;
				position: absolute;
				bottom: -23px;
				border-bottom-left-radius: 20px;
				border-bottom-right-radius: 20px;
			}
		}
			[data-testid="sidebarColumn"] [class*="r-15ysp7h r-1xcajam r-ipm5af"] {
				top: 52px !important;
				height: 20px;
				min-height: unset !important;
				align-items: flex-start !important;
				overflow: visible;
				z-index: 2;
			}
			@media only screen and (max-width: 1090px) and (min-width: 991px) {
				.css-1dbjc4n [class="css-1dbjc4n r-1h3ijdo r-136ojw6"] {
					width: 290px !important;
					margin-right: -311px !important;
				}
			}
	}
	if uncrop {
		a.css-4rbku5 > .r-1adg3ll .r-13qz1uu,
		a.css-4rbku5 > .r-1adg3ll .r-13qz1uu .r-u8s1d,
		a.css-4rbku5 > .r-1adg3ll .css-9pa8cd {
			padding-bottom: 0 !important;
			position: relative !important;
			height: auto !important;
			width: 100%;
			max-width: 100%;
			margin: auto !important;
			if maxHeight {
				max-height: calc(90vh - 55px) !important; /* -55px is height of the header */
				background-size: contain !important;
				object-fit: contain !important;
			}
		}
		a.css-4rbku5 .r-1adg3ll .r-13qz1uu [style*="background-image: url"] {
			position: absolute !important;
			width: 100%;
			max-width: 100%;
			min-height: 100%;
			margin: auto !important;
			opacity: .8 !important;
			background-size: cover !important;
			filter: blur(30px);
			transform: scale(1.2);
		}
	}
	if resizeSidebar {
		[class="css-1dbjc4n r-18u37iz r-1pi2tsx r-11yh6sk r-buy8e9 r-bnwqim r-13qz1uu"] > div:last-of-type:not(:first-child) {
			flex-grow: 1;
			max-width: 600px;
		}
	}
	if removeImageBar {
		.css-1dbjc4n.r-1pi2tsx.r-11yh6sk.r-buy8e9.r-bnwqim.r-13qz1uu > .css-1dbjc4n.r-13awgt0.r-184en5c + .css-1dbjc4n.r-1kihuf0.r-13qz1uu {
			display: none;
		}
	}
	if noTrends {
		[data-testid="sidebarColumn"] section.css-1dbjc4n > .css-4rbku5.css-901oao.r-4iw3lz.r-1xk2f4g.r-109y4c4.r-1udh08x.r-wwvuq4.r-u8s1d.r-92ng3h + .css-1dbjc4n {
			display: none;
			& + .r-1uaug3w {
				display: none;
			}
		}
	}
	if noFollowBox {
		[data-testid="sidebarColumn"] [class*="r-1bro5k0 r-1udh08x"] {
			display: none !important;
			& + .r-1uaug3w {
				display: none;
			}
		}
	}
	
	
	
	if noMessagesBox {
		[class*="css-1dbjc4n r-173mn98"][class*="r-c67a83 r-1qk6wnv"][class*="r-1mf7evn r-hvns9x"] {
			display: none;
		}
	}
	
	if hideTweetBoxTL {
		
		[data-testid="primaryColumn"] > div > [class="css-1dbjc4n r-yfoy6g r-184en5c"]:nth-child(2) {
			display: none;
			+ div {
				background: none !important;
				border: none !important;
			}
		}
	}
	
	if noBorder == "keep" || noBorder == "Hide" {
		*:not(.r-1xl5njo):not(.css-1dbjc4n[aria-label] > div > div > div) {
			border-color: transparent !important;
		}
		a.css-4rbku5 > .r-1adg3ll .css-9pa8cd {
			border-bottom-left-radius: 16px;
			border-bottom-right-radius: 16px;
		}
	}
	if noBorder == "Hide" {
		*:not(.r-1xl5njo) {
			border-color: transparent !important;
		}
	}
	
	if columnBG {
		body[style*="background-color: rgb(21"],
 		body[style*="background-color: rgb(21"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"],
 		body[style*="background-color: rgb(21"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"]::before{ 
			background-color: #10171e !important;
		}
		
		body[style*="background-color: rgb(255"],
 		body[style*="background-color: rgb(255"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"],
 		body[style*="background-color: rgb(255"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"]::before {
			background-color: #e6ecf0 !important;
		}
		body[style*="background-color: rgb(0"],
 		body[style*="background-color: rgb(0"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"],
		body[style*="background-color: rgb(0"] [data-testid="sidebarColumn"] > .css-1dbjc4n > .r-1hycxz [class*="r-ipm5af r-1hycxz r-136ojw6"]::before {
			background-color: rgb(8,8,8) !important;
		}
	}
	if bgBanner {
		[class="css-1dbjc4n r-1p0dtai r-1mlwlqe r-1d2f490 r-1udh08x r-u8s1d r-zchlnj r-ipm5af r-417010"] > .css-1dbjc4n.r-1niwhzg.r-vvn4in.r-u6sd8q.r-4gszlv.r-1p0dtai.r-1pi2tsx.r-1d2f490.r-u8s1d.r-zchlnj.r-ipm5af.r-13qz1uu.r-1wyyakw[style*="https://pbs.twimg.com/profile_banners"] {
			position: fixed !important;
			height: 100vh !important;
			width: 100vw !important;
			top: 0;
			left: 0;
			opacity: .1 !important;
			z-index: -99999;
			pointer-events: none;
			filter: blur(10px);
			object-fit: cover;
			background-size: cover !important;
		}
		a.css-4rbku5 > .r-1adg3ll .css-9pa8cd {
			opacity: 1;
		}
	}
// 	if pfpPosts {
//  		article [class*="css-1dbjc4n r-18kxxzh r-1wbh5a2 r-13qz1uu"] * {
// 			overflow: visible;
// 		}
// 		article [class*="css-1dbjc4n r-18kxxzh r-1wbh5a2 r-13qz1uu"] [style*='background-image: url("https://pbs.twimg.com/profile_images/']::before {
// 			content: "";
// 			background-image: inherit;
// 			position: absolute;
// 			top: -9000px;
// 			left: -9000px;
// 			right: -9000px;
// 			bottom: -9000px;
// 			pointer-events: none;
// 			opacity: .1;
// 			filter: blur(25px) !important;
// 			z-index: -10;
// 		}
// 		a.css-4rbku5 > .r-1adg3ll .css-9pa8cd {
// 			opacity: 1;
// 		}
// 	}
	
	if centerTweet {
		[class="css-1dbjc4n r-12vffkv"]:first-child {
			// position: absolute;
			z-index: 2;
			[class="css-1dbjc4n r-173mn98 r-18rd0c5 r-1ff5aok"] {
				bottom: -50px;
				right: unset;
				left: unset;
				margin: auto;
			}
		}
		[class="css-1dbjc4n r-12vffkv"] nav > a:nth-child(2) {
			margin-right: 80px;
		}
	}
	if largerBottomBar {
		[class*="r-18u37iz r-drjvcx r-ripixn r-13qz1uu"] {
			height: 70px !important;
		}
		if centerTweet {
			[class="css-1dbjc4n r-12vffkv"]:first-child {
				[class="css-1dbjc4n r-173mn98 r-18rd0c5 r-1ff5aok"] {
					bottom: -66px;
				}
			}
		}
	}
	if bottomHeader {
		header[class="css-1dbjc4n r-lrvibr r-1g40b8q"] > [class*="r-o4zss7 r-rull8r r-qklmqi r-1d2f490 r-1xcajam r-zchlnj r-1gn8etr"] {
			bottom: 50px;
			top: unset;
			animation: none !important;
			transition: bottom .2s, top .5s !important;
			transform: none !important;
			if largerBottomBar {
				bottom: 70px;
			}
			&.r-1yse23k {
				bottom: -55px;
				if largerBottomBar {
					bottom: 20px;
				}
			}
			if not centerTweet {
				padding-right: 95px !important;
			}
			[class="css-1dbjc4n r-150rngu r-yfoy6g r-1p0dtai r-1d2f490 r-1rnoaur r-1r851ge r-1xcajam r-zchlnj r-hbs49y"] {
				top: 0 !important;
				margin-bottom: 155px;
			}
		}
		header[class="css-1dbjc4n r-lrvibr r-1g40b8q"] {
			order: 2;
		}
		
	}
	
	[class="css-1dbjc4n r-1wbh5a2 r-dnmrzs"] .r-sdzlij, [class="css-1dbjc4n r-1wbh5a2 r-dnmrzs"] .r-sdzlij img,
	[class*="r-f6ebdl r-sdzlij r-1phboty r-14f9gny r-1loqt21 r-1gzrgec r-cnkkqs r-zjg7tu r-mtrfb5 r-1ny4l3l r-1udh08x r-o7ynqc r-6416eg r-1xce0ei"],
 	[class="css-1dbjc4n r-sdzlij r-1p0dtai r-1mlwlqe r-1d2f490 r-1udh08x r-u8s1d r-zchlnj r-ipm5af r-417010"] {
		border-radius: avatarRadius !important;
		transition: border-radius .5s, transform .5s;
	}
	
	if moreAnim {
		@keyframes fadeIn {
			from { opacity: 0 }
			to   { opacity: 1 }
		}
		@keyframes slideUp {
			from { transform: translateY(10px); opacity: 0 }
			to   { transform: translateY(0px); opacity: 1 }
		}
		@keyframes scaleIn {
			0% { transform: scale(1.1); opacity: 0 }
			30% { transform: scale(.99); opacity: 1 }
			60% { transform: scale(1.005); opacity: 1 }
			100%   { transform: scale(1); opacity: 1 }
		}
		
		article > * {
			animation: fadeIn .7s;
		}
		[data-testid="primaryColumn"] > div > div > div:not([data-testid="titleContainer"]){
			animation: slideUp .7s;
		}
		
		.r-g6jmlv,
 		[class="css-1dbjc4n r-1p0dtai r-1mlwlqe r-1d2f490 r-1udh08x r-u8s1d r-zchlnj r-ipm5af r-417010"] > .css-1dbjc4n.r-1niwhzg.r-vvn4in.r-u6sd8q.r-4gszlv.r-1p0dtai.r-1pi2tsx.r-1d2f490.r-u8s1d.r-zchlnj.r-ipm5af.r-13qz1uu.r-1wyyakw[style*="https://pbs.twimg.com/profile_banners"] {
			animation: scaleIn .5s;
		}
		
		
		*:not(.r-1xl5njo) {
			transition: border .5s, transform .2s;
		}
		body,
		.css-1dbjc4n [class="css-1dbjc4n r-1h3ijdo r-136ojw6"], .css-1dbjc4n [class="css-1dbjc4n r-1h3ijdo r-136ojw6"] > div > .r-yfoy6g,
		[data-testid="sidebarColumn"] > .css-1dbjc4n > [class*="css-1dbjc4n r-1xcajam r-ipm5af"]::before,
		[data-testid="sidebarColumn"] [class*="r-1xcajam r-ipm5af r-1hycxz r-136ojw6"],
		[class="css-1dbjc4n r-173mn98 r-18rd0c5 r-1ff5aok"],
		[class="css-1dbjc4n r-yfoy6g r-18u37iz r-drjvcx r-ripixn r-13qz1uu"],
		[class="css-1dbjc4n r-12vffkv"] nav > a:nth-child(2),
		[class*="r-o4zss7 r-rull8r r-qklmqi r-1d2f490 r-1xcajam r-zchlnj r-1gn8etr"],
 		article, button, a {
			transition: background .3s, margin .3s, padding .5s, width .5s, top .3s, left .3s, bottom, .3s, right .3s, height .5s, transform .5s !important;
		}
		

 		img:active, [style*="background-image: url"]:active, {
			transform: scale(.99) !important;
			transition: transform .2s !important;
			border-radius: 16px;
		}
		[role="button"]:active {
			transform: scale(.95) !important;
		}
		
		
	}
	
	
	
	if noBorder == "Hide" && ! columnBG {
		div[style*="position: absolute; width: 100%; transform: "] > div {
			border-radius: 16px !important;
			overflow: hidden;
		}
	}
	
	
	

	
}